<ion-content [fullscreen]="true" class="login-content">
  <div class="login-container" @zoomIn>
    <ion-card class="login-card">
      <ion-card-header>
        <ion-card-title class="text-center">Créer un compte</ion-card-title>
        <ion-card-subtitle class="text-center">
          C’est rapide et gratuit
        </ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <form [formGroup]="form" (ngSubmit)="register()">

          <ion-item>
            <ion-icon name="person-outline" slot="start"></ion-icon>
            <ion-input formControlName="firstname" placeholder="Prénom"></ion-input>
          </ion-item>

          <ion-item>
            <ion-icon name="person-outline" slot="start"></ion-icon>
            <ion-input formControlName="lastname" placeholder="Nom"></ion-input>
          </ion-item>

          <ion-item>
            <ion-icon name="mail-outline" slot="start"></ion-icon>
            <ion-input formControlName="email" placeholder="Email"></ion-input>
          </ion-item>

          <ion-item>
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-input type="password" formControlName="password" placeholder="Mot de passe"></ion-input>
          </ion-item>

          <ion-item>
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-input type="password" formControlName="confirmPassword" placeholder="Confirmer le mot de passe"></ion-input>
          </ion-item>

     <ion-text color="danger" *ngIf="form.errors?.['mismatch'] && form.get('confirmPassword')?.touched">
  <p class="error-msg">Les mots de passe ne correspondent pas.</p>
</ion-text>


          <ion-button expand="block" type="submit" [disabled]="form.invalid || loading" class="mt-4">
            Créer un compte
          </ion-button>

          <ion-text color="danger" *ngIf="errorMessage">
            <p class="error-msg">{{ errorMessage }}</p>
          </ion-text>
        </form>

        <div class="register-link">
          <ion-button
            expand="block"
            fill="clear"
            class="register-btn"
            (click)="goToLogin()"
          >
            J'ai déjà un compte, se connecter
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
